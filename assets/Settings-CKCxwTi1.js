import{j as e}from"./ui-vendor-rcE90lUk.js";import{r as l}from"./react-vendor-oaxG2rvL.js";import{P as z,C as d,a as x,b as o,c as m,d as u,D as M}from"./PageTitle-CuESkVaT.js";import{I as h,B as j,S as O,T as D}from"./textarea-BJWmbDpd.js";import{c as I,u as G,S as _,K as B,a as F,E as R}from"./index-D5IEDIps.js";import{A as W}from"./alert-circle-CMLQHcCH.js";import{T as Y}from"./trash-2-BwqeuaH0.js";import"./pdf-vendor-h9Wj2YyB.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=I("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=I("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),n={success:s=>{console.log("[Success]",s)},error:s=>{console.error("[Error]",s)},warning:s=>{console.warn("[Warning]",s)},info:s=>{console.info("[Info]",s)}},q=/^sk-[a-zA-Z0-9]{48,}$/,H=/^sk-[a-zA-Z0-9]{32,}$/;function k(s){if(!s||s.trim()==="")return{isValid:!1,error:"API 키를 입력해주세요."};const t=s.trim();return t.includes(" ")?{isValid:!1,error:"API 키에 공백이 포함되어 있습니다."}:t.startsWith("sk-")?t==="sk-...your-api-key..."||t==="sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"?{isValid:!1,error:"유효한 API 키를 입력해주세요."}:q.test(t)?{isValid:!0}:H.test(t)?{isValid:!0,warning:"이전 형식의 API 키입니다. 새로운 키로 업데이트를 권장합니다."}:{isValid:!1,error:"API 키 형식이 올바르지 않습니다."}:{isValid:!1,error:'OpenAI API 키는 "sk-"로 시작해야 합니다.'}}async function J(s){try{const t=await fetch("https://api.openai.com/v1/models",{headers:{Authorization:`Bearer ${s}`}});return t.status===401?(n.error("API 키가 유효하지 않습니다."),!1):t.status===429?(n.warning("API 사용량 한도에 도달했습니다."),!0):t.ok?(n.success("API 키가 확인되었습니다."),!0):!1}catch(t){return console.error("API key verification error:",t),n.error("API 키 확인 중 오류가 발생했습니다."),!1}}function Q(s){return s?s.trim().replace(/['"]/g,""):""}function U(s){if(!s||s.length<10)return"***";const t=s.substring(0,7),v=s.substring(s.length-4);return`${t}...${v}`}function ie(){const{apiKey:s,setApiKey:t,selectedModel:v,storageService:N}=G(),[g,P]=l.useState(!1),[b,y]=l.useState(""),[A,w]=l.useState(!1),[p,f]=l.useState("idle"),[S,C]=l.useState(v),[i,c]=l.useState({maxTokens:2e3,temperature:.7,autoSave:!0,language:"korean",theme:"light"});l.useEffect(()=>{if(y(s),s){const a=k(s);f(a.isValid?"valid":"invalid")}},[s]);const T=async()=>{const a=Q(b),r=k(a);if(!r.isValid){n.error(r.error||"API 키가 유효하지 않습니다."),f("invalid");return}r.warning&&n.warning(r.warning),w(!0);const $=await J(a);w(!1),$?(t(a),f("valid"),n.success("API 키가 저장되었습니다.")):f("invalid")},E=()=>{const a=N.exportAllData();R.downloadJSON(a,"teaching-assistant-data")},V=()=>{confirm("모든 저장된 데이터를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.")&&(N.clearAll(),alert("모든 데이터가 삭제되었습니다."))},K=[{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",cost:"$0.002/1K tokens"},{value:"gpt-4",label:"GPT-4",cost:"$0.03/1K tokens"},{value:"gpt-4-turbo-preview",label:"GPT-4 Turbo",cost:"$0.01/1K tokens"}];return e.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[e.jsx(z,{icon:_,title:"설정",description:"애플리케이션 설정 및 환경 구성"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(d,{children:[e.jsxs(x,{children:[e.jsxs(o,{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"h-5 w-5"}),e.jsx("span",{children:"API 설정"})]}),e.jsx(m,{children:"OpenAI API 키와 모델 설정을 관리하세요"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:["OpenAI API Key",p==="valid"&&e.jsx(F,{className:"h-4 w-4 text-green-500"}),p==="invalid"&&e.jsx(W,{className:"h-4 w-4 text-red-500"})]}),e.jsxs("div",{className:"flex space-x-2 mt-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(h,{type:g?"text":"password",value:b,onChange:a=>y(a.target.value),placeholder:"sk-...",className:p==="invalid"?"border-red-500":p==="valid"?"border-green-500":""}),e.jsx(j,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2",onClick:()=>P(!g),children:g?e.jsx(Z,{className:"h-4 w-4"}):e.jsx(L,{className:"h-4 w-4"})})]}),e.jsx(j,{onClick:T,size:"sm",disabled:A,children:A?e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(O,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"API 키는 안전하게 암호화되어 로컬에 저장됩니다"}),s&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["현재 키: ",U(s)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"모델 선택"}),e.jsx("select",{value:S,onChange:a=>C(a.target.value),className:"w-full p-2 border rounded-md mt-1",children:K.map(a=>e.jsxs("option",{value:a.value,children:[a.label," (",a.cost,")"]},a.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"최대 토큰"}),e.jsx(h,{type:"number",value:i.maxTokens,onChange:a=>c(r=>({...r,maxTokens:parseInt(a.target.value)})),min:"100",max:"4000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"창의성 (Temperature)"}),e.jsx(h,{type:"number",step:"0.1",value:i.temperature,onChange:a=>c(r=>({...r,temperature:parseFloat(a.target.value)})),min:"0",max:"2"})]})]})]})]}),e.jsxs(d,{children:[e.jsxs(x,{children:[e.jsx(o,{children:"일반 설정"}),e.jsx(m,{children:"애플리케이션의 일반적인 동작을 설정하세요"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"언어"}),e.jsxs("select",{value:i.language,onChange:a=>c(r=>({...r,language:a.target.value})),className:"w-full p-2 border rounded-md mt-1",children:[e.jsx("option",{value:"korean",children:"한국어"}),e.jsx("option",{value:"english",children:"English"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"테마"}),e.jsxs("select",{value:i.theme,onChange:a=>c(r=>({...r,theme:a.target.value})),className:"w-full p-2 border rounded-md mt-1",children:[e.jsx("option",{value:"light",children:"라이트"}),e.jsx("option",{value:"dark",children:"다크"}),e.jsx("option",{value:"system",children:"시스템 설정 따르기"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"autoSave",checked:i.autoSave,onChange:a=>c(r=>({...r,autoSave:a.target.checked})),className:"rounded"}),e.jsx("label",{htmlFor:"autoSave",className:"text-sm font-medium",children:"자동 저장 활성화"})]})]})]}),e.jsxs(d,{children:[e.jsxs(x,{children:[e.jsx(o,{children:"데이터 관리"}),e.jsx(m,{children:"저장된 데이터를 관리하고 백업하세요"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"24"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"생성된 문서"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"1.2MB"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"사용된 저장공간"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{onClick:E,variant:"outline",className:"w-full",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"데이터 내보내기"]}),e.jsxs(j,{onClick:V,variant:"outline",className:"w-full text-red-600 hover:text-red-700",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"모든 데이터 삭제"]})]})]})]}),e.jsxs(d,{children:[e.jsxs(x,{children:[e.jsx(o,{children:"사용량 통계"}),e.jsx(m,{children:"API 사용량과 비용을 확인하세요"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"이번 달 토큰 사용량"}),e.jsx("span",{className:"text-sm font-medium",children:"45,230 tokens"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"45%"}})}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"45% 사용"}),e.jsx("span",{children:"100,000 tokens 한도"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm",children:"예상 비용"}),e.jsx("span",{className:"text-sm font-medium",children:"$12.45"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"GPT-3.5 Turbo"}),e.jsx("span",{children:"$8.20"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"GPT-4"}),e.jsx("span",{children:"$4.25"})]})]})]})]})]})]}),e.jsxs(d,{children:[e.jsxs(x,{children:[e.jsx(o,{children:"고급 설정"}),e.jsx(m,{children:"고급 사용자를 위한 상세 설정"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"커스텀 프롬프트 템플릿"}),e.jsx(D,{placeholder:"기본 프롬프트 템플릿을 수정하여 AI 응답을 개선할 수 있습니다",rows:4,className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"요청 타임아웃 (초)"}),e.jsx(h,{type:"number",defaultValue:"30",min:"10",max:"120"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"재시도 횟수"}),e.jsx(h,{type:"number",defaultValue:"3",min:"1",max:"5"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"debug",className:"rounded"}),e.jsx("label",{htmlFor:"debug",className:"text-sm font-medium",children:"디버그 모드 활성화"})]}),e.jsx(j,{variant:"outline",className:"w-full",children:"고급 설정 저장"})]})]})]})}export{ie as Settings};
